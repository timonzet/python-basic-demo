{% extends 'base.html' %}

{% block title %}
    Products list
{% endblock %}
{% from 'macros/show-flashed-messages.html' import show_flashed_messages_with_categories %}
{% block body %}
    <h2>Hello Products list</h2>

    {{ show_flashed_messages_with_categories() }}

{#    {% with messages = get_flashed_messages(with_categories=true) %}#}
{#        {% if messages %}#}
{#            {% for category, message in messages %}#}
{#                <div class="my-2 alert alert-#}
{#                {%- if category == 'message' -%}#}
{#                primary#}
{#                {%- else -%}#}
{#                {{- category -}}#}
{#                {%- endif -%}#}
{#">{{ message }}#}
{#                </div>#}
{#            {% endfor %}#}
{#        {% endif %}#}
{#    {% endwith %}#}

    {% if products %}
        <h3>Products:</h3>
        <ul class="list-group">
            {% for product in products %}
                <li class="list-group-item">
                    <a class="btn btn-link h-100 w-100 p-0 text-start text-decoration-none"
                       href="{{ url_for('products_app.details', product_id=product.id) }}">
                        {{ product.name }}</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <h3>No products yet.</h3>
    {% endif %}

    <div class="my-3"><a class="no-underline" href="{{ url_for('products_app.add') }}">Add new</a></div>
{% endblock %}
